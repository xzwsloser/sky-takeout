# 商品信息的缓存
## 缓存菜品
- 具体的缓存方式还是参考黑马点评中的缓存机制:
  - 首先查询 Redis 看Redis中是否存在缓存: 不存在就可以查询数据库,如果存在取出缓存中的数据
  - 不存在查询数据库之后就可以把查询到的数据写入到数据库中
- 注意如何确定缓存粒度: 这里根据分类进行展示,所以这里可以使用每一个分类构建一个缓存就可以了
- 最后注意修改数据库时需要清除缓存
- 类型可以使用 String,Hash,List都可以:
  - String: 直接把列表序列化存入到Redis中
  - Hash: 直接用id作为key,之后的对象作为 field
  - List: 把每一个数据作为一个对象缓存到Redis中
- 具体实现还是注意一点: 使用 StringRedisTemplate 还是 RedisTemplate
- 二者的区别就在于前者主要用于处理string类型类型的数据,存入和取出的数据都需要是String类型(但是取出之后需要自己序列化和反序列化),但是RedisTemplate操作的是任意数据类型
取出之后可以通过强制类型转换转换到需要的数据类型
- 数据的一致性:
  - 数据发生更新时一定需要清除缓存而不是更新缓存,这就是保证缓存一致性的最好的策略,详情查看黑马点评项目
- 注意缓存重建问题: 这里不需要考虑并发情况下的缓存重建问题,统一采用删除 缓存的方式重建缓存,同时注意增删改的操作一般使用的比较少,
所以在增删改操作的时候直接请求所有的缓存就可以了,最佳时间可以查看黑马点评项目中的笔记
